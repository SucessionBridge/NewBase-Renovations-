<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>NewBase Renovations – Basement Design & Estimate</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* Mini Designer styles */
    .cell {
      width: 100%;
      aspect-ratio: 1 / 1;
      border: 1px dashed #e5e7eb; /* tailwind gray-200 */
      border-radius: 0.5rem;       /* rounded-xl */
      display: flex; align-items: center; justify-content: center;
      font-size: 0.75rem; font-weight: 700; color: #111827; /* gray-900 */
      user-select: none; cursor: pointer;
      background: #fff;
    }
    .cell-B  { background: #dbebff; border-color:#93c5fd; }   /* Bedroom */
    .cell-Ba { background: #ffe8e8; border-color:#fca5a5; }   /* Bathroom */
    .cell-O  { background: #e0ffe8; border-color:#86efac; }   /* Office */
    .cell-L  { background: #fff5d6; border-color:#fcd34d; }   /* Laundry */
    .cell-W  { background: #efe9ff; border-color:#c4b5fd; }   /* Wet Bar */
    .cell-K  { background: #e7fff8; border-color:#99f6e4; }   /* Kitchenette */
    .tool-btn.active { background:#111827; color:#fff; }
  </style>
</head>
<body class="min-h-screen bg-white text-gray-900">
  <!-- Navbar -->
  <header class="sticky top-0 z-40 bg-white/80 backdrop-blur border-b">
    <div class="max-w-6xl mx-auto px-4 py-3 flex items-center justify-between">
      <div class="flex items-center gap-2">
        <div class="w-9 h-9 rounded-xl bg-gray-900"></div>
        <span class="font-bold text-xl">NewBase <span class="text-gray-500">Renovations</span></span>
      </div>
      <a href="#design" class="px-3 py-2 rounded-xl bg-gray-900 text-white text-sm">Design</a>
    </div>
  </header>

  <!-- Hero -->
  <section class="bg-gradient-to-b from-gray-50 to-white">
    <div class="max-w-6xl mx-auto px-4 py-16 md:py-24 grid md:grid-cols-2 gap-10 items-center">
      <div>
        <h1 class="text-4xl md:text-5xl font-extrabold leading-tight">
          Add <span class="text-gray-900">New Living Space</span> to Your New Build.
        </h1>
        <p class="mt-4 text-gray-600 text-lg">
          Suite-ready basements, family rec rooms, gyms, offices, and in-law apartments.
          Plan it in minutes, get an instant price range, and book a free site visit.
        </p>
        <div class="mt-6 flex flex-col sm:flex-row gap-3">
          <a href="#design" class="px-5 py-3 rounded-2xl bg-gray-900 text-white font-semibold">Design Your Basement →</a>
          <a href="#contact" class="px-5 py-3 rounded-2xl border font-semibold text-gray-900">Get a Quote</a>
        </div>
        <div class="mt-6 text-sm text-gray-600 flex items-center gap-3">
          <span class="px-2 py-1 rounded-full bg-emerald-100 text-emerald-700 font-medium">Winter Project Friendly</span>
          <span>Permits • Egress • Soundproofing • Legal Suites</span>
        </div>
      </div>
      <div class="aspect-[4/3] w-full rounded-3xl bg-gray-200 shadow-inner grid grid-cols-3 gap-2 p-2">
        <div class="rounded-2xl bg-white shadow"></div><div class="rounded-2xl bg-white shadow"></div><div class="rounded-2xl bg-white shadow"></div>
        <div class="rounded-2xl bg-white shadow"></div><div class="rounded-2xl bg-white shadow"></div><div class="rounded-2xl bg-white shadow"></div>
        <div class="rounded-2xl bg-white shadow"></div><div class="rounded-2xl bg-white shadow"></div><div class="rounded-2xl bg-white shadow"></div>
      </div>
    </div>
  </section>

  <!-- Designer + Estimator -->
  <section id="design" class="max-w-6xl mx-auto px-4 py-12">
    <div class="grid lg:grid-cols-2 gap-8 items-start">
      <!-- Inputs -->
      <div class="p-6 rounded-2xl border bg-white shadow-sm space-y-4">
        <h2 class="text-xl font-bold">Design Your Basement</h2>
        <p class="text-gray-600">This quick planner gives a realistic price range. Final quotes follow a site visit and drawings.</p>

        <div class="grid sm:grid-cols-2 gap-4">
          <label class="text-sm">Square Footage
            <input id="sqft" type="number" min="200" step="50" value="800" class="mt-1 w-full px-4 py-3 rounded-xl border" />
          </label>
          <label class="text-sm">Finish Level
            <select id="finish" class="mt-1 w-full px-4 py-3 rounded-xl border">
              <option>Suite-Ready</option><option>Starter</option><option>Luxury</option>
            </select>
          </label>
          <label class="text-sm">Bedrooms
            <input id="bedrooms" type="number" min="0" max="6" value="1" class="mt-1 w-full px-4 py-3 rounded-xl border" />
          </label>
          <label class="text-sm">Bathroom
            <select id="bath" class="mt-1 w-full px-4 py-3 rounded-xl border">
              <option>3-pc</option><option>2-pc</option><option>None</option>
            </select>
          </label>
          <label class="flex items-center gap-2 text-sm"><input id="office" type="checkbox" checked /> Office / Den</label>
          <label class="flex items-center gap-2 text-sm"><input id="laundry" type="checkbox" checked /> Laundry</label>
          <label class="flex items-center gap-2 text-sm"><input id="wetbar" type="checkbox" /> Wet Bar</label>
          <label class="flex items-center gap-2 text-sm"><input id="kitchenette" type="checkbox" /> Kitchenette</label>
        </div>

        <div class="grid sm:grid-cols-2 gap-4 pt-2">
          <label class="text-sm">Ceiling Height (ft)
            <input id="ceiling" type="number" step="0.1" min="6.5" value="8.0" class="mt-1 w-full px-4 py-3 rounded-xl border" />
          </label>
          <label class="flex items-center gap-2 text-sm"><input id="egress" type="checkbox" checked /> Need egress window cut-in</label>
          <label class="flex items-center gap-2 text-sm"><input id="roughins" type="checkbox" checked /> Rough-ins already in place</label>
          <label class="flex items-center gap-2 text-sm"><input id="sound" type="checkbox" checked /> Enhanced soundproofing</label>
        </div>

        <div class="mt-4 text-xs text-gray-500">
          * Egress, ceiling, and alarms are guidance only—final design must meet local code.
        </div>

        <!-- Mini Layout Designer -->
        <div class="mt-8 p-6 rounded-2xl border bg-white shadow-sm">
          <h3 class="font-semibold mb-2">Quick Layout (optional)</h3>
          <p class="text-gray-600 text-sm mb-4">Pick a module, then click on grid cells to place it. We’ll auto-update the estimator.</p>

          <!-- Palette -->
          <div class="flex flex-wrap gap-2 mb-4">
            <button type="button" data-tool="B"  class="tool-btn px-3 py-2 rounded-xl border">Bedroom (B)</button>
            <button type="button" data-tool="Ba" class="tool-btn px-3 py-2 rounded-xl border">Bathroom (Ba)</button>
            <button type="button" data-tool="O"  class="tool-btn px-3 py-2 rounded-xl border">Office (O)</button>
            <button type="button" data-tool="L"  class="tool-btn px-3 py-2 rounded-xl border">Laundry (L)</button>
            <button type="button" data-tool="W"  class="tool-btn px-3 py-2 rounded-xl border">Wet Bar (W)</button>
            <button type="button" data-tool="K"  class="tool-btn px-3 py-2 rounded-xl border">Kitchenette (K)</button>
            <button type="button" id="eraser"    class="px-3 py-2 rounded-xl border">Eraser</button>
            <button type="button" id="clearGrid" class="px-3 py-2 rounded-xl border">Clear Grid</button>
          </div>

          <!-- Grid 12 x 6 -->
          <div id="miniGrid" class="grid grid-cols-12 gap-1 select-none">
            <!-- 72 cells -->
            <!-- rows -->
            <!-- We create with JS for cleaner DOM -->
          </div>

          <p class="text-xs text-gray-500 mt-3">Tip: One “Ba” counts as a 3-pc bath. Add more “Ba” for multiple baths (estimator uses the first for pricing).</p>
        </div>
      </div>

      <!-- Results -->
      <div class="p-6 rounded-2xl border bg-white shadow-sm">
        <h3 class="font-semibold">Estimated Price Range</h3>
        <p class="text-gray-600 text-sm">Based on inputs and typical conditions in Ontario.</p>

        <div class="mt-4 grid grid-cols-2 gap-4">
          <div class="p-4 rounded-xl bg-gray-50 border">
            <div class="text-xs text-gray-500">Low</div>
            <div id="priceLow" class="text-2xl font-extrabold">$0</div>
          </div>
          <div class="p-4 rounded-xl bg-gray-50 border">
            <div class="text-xs text-gray-500">High</div>
            <div id="priceHigh" class="text-2xl font-extrabold">$0</div>
          </div>
        </div>

        <div class="mt-6 space-y-2 text-sm">
          <div class="flex justify-between"><span>Base</span><span id="base">$0</span></div>
          <div class="flex justify-between"><span>Modules</span><span id="modules">$0</span></div>
          <div class="flex justify-between hidden" id="lowCeilingRow"><span>Low ceiling adj.</span><span id="lowCeiling">$0</span></div>
          <div class="flex justify-between hidden" id="egressRow"><span>Egress window(s)</span><span id="egressAmt">$0</span></div>
          <div class="flex justify-between hidden" id="soundRow"><span>Soundproofing</span><span id="soundAmt">$0</span></div>
          <div class="flex justify-between text-emerald-700 hidden" id="roughInRow"><span>Rough-ins credit</span><span id="roughInsAmt">$0</span></div>
          <div class="flex justify-between font-semibold border-t pt-2"><span>Subtotal</span><span id="subtotal">$0</span></div>
        </div>
      </div>
    </div>
  </section>

  <!-- Contact -->
  <section id="contact" class="max-w-6xl mx-auto px-4 py-12">
    <h2 class="text-2xl font-bold mb-4">Contact Us</h2>
    <form class="space-y-4 max-w-md" onsubmit="event.preventDefault();alert('Thank you! We will contact you shortly.');">
      <input type="text" placeholder="Name" required class="w-full px-4 py-3 border rounded-xl" />
      <input type="email" placeholder="Email" required class="w-full px-4 py-3 border rounded-xl" />
      <textarea placeholder="Project details" rows="4" class="w-full px-4 py-3 border rounded-xl"></textarea>
      <button type="submit" class="px-5 py-3 rounded-2xl bg-gray-900 text-white font-semibold w-full">Send Message</button>
    </form>
  </section>

  <footer class="border-t">
    <div class="max-w-6xl mx-auto px-4 py-6 text-sm text-gray-600">
      © <span id="y"></span> NewBase Renovations
    </div>
  </footer>

  <script>
    // Year
    document.getElementById("y").textContent = new Date().getFullYear();

    // --- Estimator ---
    const RATES = { Starter: 80, "Suite-Ready": 110, Luxury: 150 }; // CAD per sq ft
    const $ = id => document.getElementById(id);
    function cad(n){ return n.toLocaleString(undefined, { style: "currency", currency: "CAD", maximumFractionDigits: 0 }); }

    function estimate() {
      const sqft       = +$('sqft').value || 0;
      const finish     = $('finish').value;
      const bedrooms   = +$('bedrooms').value || 0;
      const bath       = $('bath').value;
      const office     = $('office').checked;
      const laundry    = $('laundry').checked;
      const wetbar     = $('wetbar').checked;
      const kitchenette= $('kitchenette').checked;
      const ceiling    = +$('ceiling').value || 8;
      const egress     = $('egress').checked;
      const roughIns   = $('roughins').checked;
      const sound      = $('sound').checked;

      const base = sqft * (RATES[finish] || 0);
      const modules =
        bedrooms * 5000 +
        (bath === "None" ? 0 : bath === "2-pc" ? 6000 : 12000) +
        (office ? 3000 : 0) +
        (laundry ? 4000 : 0) +
        (wetbar ? 7000 : 0) +
        (kitchenette ? 15000 : 0);

      const lowCeilingAdj = ceiling < 7.5 ? 0.10 * (base + modules) : 0;
      const egressAmt = egress ? 3000 * Math.max(1, bedrooms) : 0;
      const roughInsCredit = roughIns ? -2000 : 0;
      const soundAmt = sound ? 0.015 * (base + modules) : 0;

      const subtotal = base + modules + lowCeilingAdj + egressAmt + soundAmt + roughInsCredit;
      const low = subtotal * 0.9, high = subtotal * 1.1;

      $('priceLow').textContent = cad(low);
      $('priceHigh').textContent = cad(high);
      $('base').textContent = cad(base);
      $('modules').textContent = cad(modules);
      $('lowCeiling').textContent = cad(lowCeilingAdj);
      $('egressAmt').textContent = cad(egressAmt);
      $('soundAmt').textContent = cad(soundAmt);
      $('roughInsAmt').textContent = cad(roughInsCredit);
      $('subtotal').textContent = cad(subtotal);

      $('lowCeilingRow').classList.toggle('hidden', lowCeilingAdj === 0);
      $('egressRow').classList.toggle('hidden', egressAmt === 0);
      $('soundRow').classList.toggle('hidden', soundAmt === 0);
      $('roughInRow').classList.toggle('hidden', roughInsCredit === 0);
    }

    // Watch for changes on inputs
    ['sqft','finish','bedrooms','bath','office','laundry','wetbar','kitchenette','ceiling','egress','roughins','sound']
      .forEach(id => {
        document.addEventListener('input', (e) => { if (e.target && e.target.id === id) estimate(); });
        document.addEventListener('change', (e) => { if (e.target && e.target.id === id) estimate(); });
      });

    // --- Mini Layout Designer ---
    (function initDesigner(){
      const grid = $('miniGrid');
      // create 12 x 6 = 72 cells
      const cols = 12, rows = 6;
      const codeFor = { B: 'B', Ba: 'Ba', O: 'O', L: 'L', W: 'W', K: 'K' };
      let currentTool = null; // 'B', 'Ba', 'O', 'L', 'W', 'K', or null for eraser

      for (let i=0;i<rows*cols;i++){
        const d = document.createElement('div');
        d.className = 'cell';
        d.dataset.code = ''; // empty = blank
        d.addEventListener('click', () => {
          if (currentTool === null) {
            // erase
            d.dataset.code = '';
            d.textContent = '';
            d.className = 'cell';
          } else {
            d.dataset.code = currentTool;
            d.textContent = currentTool;
            d.className = 'cell cell-' + currentTool;
          }
          syncInputsFromGrid();
        });
        grid.appendChild(d);
      }

      // Palette selection
      const toolBtns = Array.from(document.querySelectorAll('.tool-btn'));
      toolBtns.forEach(btn => {
        btn.addEventListener('click', () => {
          toolBtns.forEach(b => b.classList.remove('active'));
          btn.classList.add('active');
          currentTool = btn.getAttribute('data-tool'); // set current
        });
      });
      $('eraser').addEventListener('click', () => {
        toolBtns.forEach(b => b.classList.remove('active'));
        currentTool = null;
      });
      $('clearGrid').addEventListener('click', () => {
        Array.from(grid.children).forEach(c => { c.dataset.code=''; c.textContent=''; c.className='cell'; });
        syncInputsFromGrid();
      });

      function syncInputsFromGrid(){
        const codes = Array.from(grid.children).map(c => c.dataset.code);
        const count = (t) => codes.filter(x => x === t).length;

        const beds = count('B');
        const baths = count('Ba');
        const hasO = count('O') > 0;
        const hasL = count('L') > 0;
        const hasW = count('W') > 0;
        const hasK = count('K') > 0;

        // Push to inputs (non-destructive)
        $('bedrooms').value = String(beds);
        if (baths > 0 && $('bath').value === 'None') $('bath').value = '3-pc';
        $('office').checked = hasO || $('office').checked;
        $('laundry').checked = hasL || $('laundry').checked;
        $('wetbar').checked = hasW || $('wetbar').checked;
        $('kitchenette').checked = hasK || $('kitchenette').checked;

        estimate();
      }
    })();

    // Initial estimate
    estimate();
  </script>
</body>
</html>
